import{H as Y,R as ne,ap as fe,m as U,I as le,p as j,i as N,V as L,X as Q,W as be,o as x,q as I,n as ve,e as T,t as Ne,_ as pe,am as Z,aq as Te,ar as ke,c as K,k as me,$ as Se,d as r,E as W,as as Ee,at as xe,a1 as Be,au as X,Y as Re,av as ze,x as he,aw as Oe,S as Ve,ax as ce,A as Ae,ay as ie,Z as Me,az as Le,M as Ie,O as Fe,f as oe,z as De,B as Ue,N as H,a as He,a4 as qe,aA as Ke,b as ae,w as V,F as We,g as Xe,a5 as Ye,Q as ue,a6 as q,a2 as je,a7 as Qe}from"./index.bd10bac3.js";import{u as Ze}from"./el-button.651c63f4.js";import{E as Ge,a as Je,b as et}from"./el-dropdown-item.f61ffe53.js";import{c as z,U as _e}from"./el-popper.31ce43ec.js";import{_ as tt}from"./svg-icon.441a2e72.js";import{t as re}from"./index.7898061d.js";import{u as at}from"./index.166cc93b.js";import"./index.eb8b9e5b.js";import"./refs.47b7c97b.js";/* empty css                */import"./vnode.2f8d4e0e.js";const G=Symbol("tabsRootContextKey"),st=Y({tabs:{type:ne(Array),default:()=>fe([])}}),ge="ElTabBar",ot=U({name:ge}),nt=U({...ot,props:st,setup(e,{expose:l}){const o=e,O=Z(),d=le(G);d||re(ge,"<el-tabs><el-tab-bar /></el-tabs>");const n=j("tabs"),b=N(),B=N(),_=()=>{let y=0,u=0;const v=["top","bottom"].includes(d.props.tabPosition)?"width":"height",g=v==="width"?"x":"y";return o.tabs.every(k=>{var s,f,t,c;const w=(f=(s=O.parent)==null?void 0:s.refs)==null?void 0:f[`tab-${k.uid}`];if(!w)return!1;if(!k.active)return!0;u=w[`client${z(v)}`];const S=g==="x"?"left":"top";y=w[`offset${z(S)}`]-((c=(t=w.parentElement)==null?void 0:t[`offset${z(S)}`])!=null?c:0);const A=w.closest(".is-scrollable");if(A){const F=window.getComputedStyle(A);y+=Number.parseFloat(F[`padding${z(S)}`])}const M=window.getComputedStyle(w);return v==="width"&&(o.tabs.length>1&&(u-=Number.parseFloat(M.paddingLeft)+Number.parseFloat(M.paddingRight)),y+=Number.parseFloat(M.paddingLeft)),!1}),{[v]:`${u}px`,transform:`translate${z(g)}(${y}px)`}},C=()=>B.value=_();return L(()=>o.tabs,async()=>{await Q(),C()},{immediate:!0}),be(b,()=>C()),l({ref:b,update:C}),(y,u)=>(x(),I("div",{ref_key:"barRef",ref:b,class:ve([T(n).e("active-bar"),T(n).is(T(d).props.tabPosition)]),style:Ne(B.value)},null,6))}});var lt=pe(nt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const rt=Y({panes:{type:ne(Array),default:()=>fe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ct={tabClick:(e,l,o)=>o instanceof Event,tabRemove:(e,l)=>l instanceof Event},de="ElTabNav",it=U({name:de,props:rt,emits:ct,setup(e,{expose:l,emit:o}){const O=Z(),d=le(G);d||re(de,"<el-tabs><tab-nav /></el-tabs>");const n=j("tabs"),b=Te(),B=ke(),_=N(),C=N(),y=N(),u=N(!1),v=N(0),g=N(!1),k=N(!0),s=K(()=>["top","bottom"].includes(d.props.tabPosition)?"width":"height"),f=K(()=>({transform:`translate${s.value==="width"?"X":"Y"}(-${v.value}px)`})),t=()=>{if(!_.value)return;const i=_.value[`offset${z(s.value)}`],p=v.value;if(!p)return;const a=p>i?p-i:0;v.value=a},c=()=>{if(!_.value||!C.value)return;const i=C.value[`offset${z(s.value)}`],p=_.value[`offset${z(s.value)}`],a=v.value;if(i-a<=p)return;const m=i-a>p*2?a+p:i-p;v.value=m},w=async()=>{const i=C.value;if(!u.value||!y.value||!_.value||!i)return;await Q();const p=y.value.querySelector(".is-active");if(!p)return;const a=_.value,m=["top","bottom"].includes(d.props.tabPosition),h=p.getBoundingClientRect(),$=a.getBoundingClientRect(),R=m?i.offsetWidth-$.width:i.offsetHeight-$.height,E=v.value;let P=E;m?(h.left<$.left&&(P=E-($.left-h.left)),h.right>$.right&&(P=E+h.right-$.right)):(h.top<$.top&&(P=E-($.top-h.top)),h.bottom>$.bottom&&(P=E+(h.bottom-$.bottom))),P=Math.max(P,0),v.value=Math.min(P,R)},S=()=>{if(!C.value||!_.value)return;const i=C.value[`offset${z(s.value)}`],p=_.value[`offset${z(s.value)}`],a=v.value;if(p<i){const m=v.value;u.value=u.value||{},u.value.prev=m,u.value.next=m+p<i,i-m<p&&(v.value=i-p)}else u.value=!1,a>0&&(v.value=0)},A=i=>{const p=i.code,{up:a,down:m,left:h,right:$}=X;if(![a,m,h,$].includes(p))return;const R=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),E=R.indexOf(i.target);let P;p===h||p===a?E===0?P=R.length-1:P=E-1:E<R.length-1?P=E+1:P=0,R[P].focus({preventScroll:!0}),R[P].click(),M()},M=()=>{k.value&&(g.value=!0)},F=()=>g.value=!1;return L(b,i=>{i==="hidden"?k.value=!1:i==="visible"&&setTimeout(()=>k.value=!0,50)}),L(B,i=>{i?setTimeout(()=>k.value=!0,50):k.value=!1}),be(y,S),me(()=>setTimeout(()=>w(),0)),Se(()=>S()),l({scrollToActiveTab:w,removeFocus:F}),L(()=>e.panes,()=>O.update(),{flush:"post"}),()=>{const i=u.value?[r("span",{class:[n.e("nav-prev"),n.is("disabled",!u.value.prev)],onClick:t},[r(W,null,{default:()=>[r(Ee,null,null)]})]),r("span",{class:[n.e("nav-next"),n.is("disabled",!u.value.next)],onClick:c},[r(W,null,{default:()=>[r(xe,null,null)]})])]:null,p=e.panes.map((a,m)=>{var h,$,R,E;const P=a.uid,J=a.props.disabled,ee=($=(h=a.props.name)!=null?h:a.index)!=null?$:`${m}`,te=!J&&(a.isClosable||e.editable);a.index=`${m}`;const Ce=te?r(W,{class:"is-icon-close",onClick:D=>o("tabRemove",a,D)},{default:()=>[r(Be,null,null)]}):null,Pe=((E=(R=a.slots).label)==null?void 0:E.call(R))||a.props.label,$e=!J&&a.active?0:-1;return r("div",{ref:`tab-${P}`,class:[n.e("item"),n.is(d.props.tabPosition),n.is("active",a.active),n.is("disabled",J),n.is("closable",te),n.is("focus",g.value)],id:`tab-${ee}`,key:`tab-${P}`,"aria-controls":`pane-${ee}`,role:"tab","aria-selected":a.active,tabindex:$e,onFocus:()=>M(),onBlur:()=>F(),onClick:D=>{F(),o("tabClick",a,ee,D)},onKeydown:D=>{te&&(D.code===X.delete||D.code===X.backspace)&&o("tabRemove",a,D)}},[Pe,Ce])});return r("div",{ref:y,class:[n.e("nav-wrap"),n.is("scrollable",!!u.value),n.is(d.props.tabPosition)]},[i,r("div",{class:n.e("nav-scroll"),ref:_},[r("div",{class:[n.e("nav"),n.is(d.props.tabPosition),n.is("stretch",e.stretch&&["top","bottom"].includes(d.props.tabPosition))],ref:C,style:f.value,role:"tablist",onKeydown:A},[e.type?null:r(lt,{tabs:[...e.panes]},null),p])])])}}}),ut=Y({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:ne(Function),default:()=>!0},stretch:Boolean}),se=e=>Oe(e)||Ve(e),dt={[_e]:e=>se(e),tabClick:(e,l)=>l instanceof Event,tabChange:e=>se(e),edit:(e,l)=>["remove","add"].includes(l),tabRemove:e=>se(e),tabAdd:()=>!0};var ft=U({name:"ElTabs",props:ut,emits:dt,setup(e,{emit:l,slots:o,expose:O}){var d,n;const b=j("tabs"),{children:B,addChild:_,removeChild:C}=at(Z(),"ElTabPane"),y=N(),u=N((n=(d=e.modelValue)!=null?d:e.activeName)!=null?n:"0"),v=t=>{u.value=t,l(_e,t),l("tabChange",t)},g=async t=>{var c,w,S;if(!(u.value===t||ce(t)))try{await((c=e.beforeLeave)==null?void 0:c.call(e,t,u.value))!==!1&&(v(t),(S=(w=y.value)==null?void 0:w.removeFocus)==null||S.call(w))}catch{}},k=(t,c,w)=>{t.props.disabled||(g(c),l("tabClick",t,w))},s=(t,c)=>{t.props.disabled||ce(t.props.name)||(c.stopPropagation(),l("edit",t.props.name,"remove"),l("tabRemove",t.props.name))},f=()=>{l("edit",void 0,"add"),l("tabAdd")};return Ze({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},K(()=>!!e.activeName)),L(()=>e.activeName,t=>g(t)),L(()=>e.modelValue,t=>g(t)),L(u,async()=>{var t;await Q(),(t=y.value)==null||t.scrollToActiveTab()}),Re(G,{props:e,currentName:u,registerPane:_,unregisterPane:C}),O({currentName:u}),()=>{const t=e.editable||e.addable?r("span",{class:b.e("new-tab"),tabindex:"0",onClick:f,onKeydown:S=>{S.code===X.enter&&f()}},[r(W,{class:b.is("icon-plus")},{default:()=>[r(ze,null,null)]})]):null,c=r("div",{class:[b.e("header"),b.is(e.tabPosition)]},[t,r(it,{ref:y,currentName:u.value,editable:e.editable,type:e.type,panes:B.value,stretch:e.stretch,onTabClick:k,onTabRemove:s},null)]),w=r("div",{class:b.e("content")},[he(o,"default")]);return r("div",{class:[b.b(),b.m(e.tabPosition),{[b.m("card")]:e.type==="card",[b.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[c,w]:[w,c]])}}});const bt=Y({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),vt=["id","aria-hidden","aria-labelledby"],ye="ElTabPane",pt=U({name:ye}),mt=U({...pt,props:bt,setup(e){const l=e,o=Z(),O=Ae(),d=le(G);d||re(ye,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=j("tab-pane"),b=N(),B=K(()=>l.closable||d.props.closable),_=ie(()=>{var g;return d.currentName.value===((g=l.name)!=null?g:b.value)}),C=N(_.value),y=K(()=>{var g;return(g=l.name)!=null?g:b.value}),u=ie(()=>!l.lazy||C.value||_.value);L(_,g=>{g&&(C.value=!0)});const v=Me({uid:o.uid,slots:O,props:l,paneName:y,active:_,index:b,isClosable:B});return me(()=>{d.registerPane(v)}),Le(()=>{d.unregisterPane(v.uid)}),(g,k)=>T(u)?Ie((x(),I("div",{key:0,id:`pane-${T(y)}`,class:ve(T(n).b()),role:"tabpanel","aria-hidden":!T(_),"aria-labelledby":`tab-${T(y)}`},[he(g.$slots,"default")],10,vt)),[[Fe,T(_)]]):oe("v-if",!0)}});var we=pe(mt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const ht=De(ft,{TabPane:we}),_t=Ue(we);const gt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},yt=H("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32z"},null,-1),wt=[yt];function Ct(e,l){return x(),I("svg",gt,wt)}const Pt={name:"ep-switch",render:Ct},$t={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Nt=H("path",{fill:"currentColor",d:"M754.752 480H160a32 32 0 1 0 0 64h594.752L521.344 777.344a32 32 0 0 0 45.312 45.312l288-288a32 32 0 0 0 0-45.312l-288-288a32 32 0 1 0-45.312 45.312L754.752 480z"},null,-1),Tt=[Nt];function kt(e,l){return x(),I("svg",$t,Tt)}const St={name:"ep-right",render:kt},Et={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},xt=H("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),Bt=H("path",{fill:"currentColor",d:"m237.248 512l265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),Rt=[xt,Bt];function zt(e,l){return x(),I("svg",Et,Rt)}const Ot={name:"ep-back",render:zt},Vt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},At=H("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Mt=[At];function Lt(e,l){return x(),I("svg",Vt,Mt)}const It={name:"ep-refresh",render:Lt},Ft={class:"inline-flex items-center"},Gt={__name:"layout-tabs",setup(e){const l=N([]),o=He(),O=qe(),d=Xe(),n=Qe(),b=N(d.fullPath);Ke(s=>{b.value=s.fullPath});const B=(s,f)=>{f?l.value[s]=f:l.value.splice(s,1)},_=(s,f)=>{f&&l.value.forEach((t,c)=>{c!==s&&t?.handleClose()})},C=s=>{const f=o.routes.findIndex(c=>c.fullPath===d.fullPath),t=o.routes[s];s!==f&&n.push({path:t.fullPath}),o.isRefreshing=!0,Q(()=>{o.isRefreshing=!1})},y=s=>{if(o.routes.length>1){const f=o.routes.findIndex(c=>c.fullPath===s),t=o.routes.findIndex(c=>c.fullPath===d.fullPath);o.routes.splice(f,1),f===t&&(o.routes[f]?n.push(o.routes[f]):n.push(o.routes[f-1]))}},u=s=>{const f=o.routes.findIndex(c=>c.fullPath===d.fullPath),t=o.routes[s];o.routes.splice(0,s),f<s&&n.push(t)},v=s=>{const f=o.routes.findIndex(t=>t.fullPath===d.fullPath);o.routes.splice(s+1,o.routes.length-s),f>s&&n.push(o.routes[s])},g=s=>{v(s),u(s),o.routes[0].fullPath!==d.fullPath&&n.push(o.routes[0])},k=s=>{s.active||n.push(s.props.name)};return(s,f)=>{const t=It,c=Ge,w=Ot,S=St,A=Pt,M=Je,F=et,i=_t,p=ht;return x(),ae(p,{modelValue:T(b),"onUpdate:modelValue":f[0]||(f[0]=a=>We(b)?b.value=a:null),type:"border-card",class:"router-tab w-full",onTabRemove:y,onTabClick:k},{default:V(()=>[(x(!0),I(ue,null,Ye(T(o).routes,(a,m)=>(x(),I(ue,{key:a.fullPath},[!a.meta.requiresAuth||T(O).hasPermission(a.meta?.permission)?(x(),ae(i,{key:0,modelValue:a.fullPath,"onUpdate:modelValue":h=>a.fullPath=h,name:a.fullPath,closable:T(o).routes.length>1},{label:V(()=>[r(F,{ref_for:!0,ref:h=>B(m,h),class:"h-full",trigger:"contextmenu",onVisibleChange:h=>_(m,h)},{dropdown:V(()=>[r(M,null,{default:V(()=>[r(c,{onClick:h=>C(m)},{default:V(()=>[r(t),q("\u5237\u65B0")]),_:2},1032,["onClick"]),r(c,{disabled:m===0,onClick:h=>u(m)},{default:V(()=>[r(w),q("\u5173\u95ED\u5DE6\u4FA7 ")]),_:2},1032,["disabled","onClick"]),r(c,{disabled:m===T(o).routes.length-1,onClick:h=>v(m)},{default:V(()=>[r(S),q("\u5173\u95ED\u53F3\u4FA7 ")]),_:2},1032,["disabled","onClick"]),r(c,{disabled:m===0&&m===T(o).routes.length-1,onClick:h=>g(m)},{default:V(()=>[r(A),q("\u5173\u95ED\u5176\u4ED6 ")]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),default:V(()=>[H("span",Ft,[a.meta.icon?(x(),ae(tt,{key:0,name:a.meta.icon},null,8,["name"])):oe("",!0),q(" "+je(a.meta?.title??a.fullPath),1)])]),_:2},1032,["onVisibleChange"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","closable"])):oe("",!0)],64))),128))]),_:1},8,["modelValue"])}}};export{Gt as default};
