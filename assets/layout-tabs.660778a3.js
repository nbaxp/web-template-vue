import{D as W,N as H,i as J,E as se,j as k,P as V,R as Q,Q as de,o as S,m as A,n as fe,e as x,q as $e,ag as F,a1 as oe,_ as le,ah as Ce,ai as Ne,c as K,l as be,V as Te,d as l,U as ve,S as ke,p as me,a9 as xe,O as Ee,y as Se,aj as re,ak as Be,H as Re,I as Me,f as ae,x as Oe,z as ze,J as D,a as Ve,ad as Ae,al as Le,b as ee,w as z,g as Ie,ae as Fe,M as ce,a8 as Y,a3 as De,af as Ue}from"./index.b2875c3e.js";import{u as He,U as pe}from"./el-button.157702e2.js";import"./el-popper.dd060cec.js";import{E as Ke,a as Ye,b as je}from"./el-dropdown-item.b75fbef8.js";import{_ as qe}from"./svg-icon.1bc99cb2.js";import{E as j,e as We,f as Je,d as Qe,p as Xe,i as ie}from"./index.4d993eb4.js";import{m as _e,t as ne,E as q}from"./index.89744426.js";import{_ as he}from"./plugin-vue_export-helper.a0554eae.js";import{u as X}from"./index.38fcb330.js";import"./icon.68a11d83.js";import"./index.240e55c8.js";/* empty css                */const G=Symbol("tabsRootContextKey"),Ge=W({tabs:{type:H(Array),default:()=>_e([])}}),Ze={name:"ElTabBar"},et=J({...Ze,props:Ge,setup(t,{expose:r}){const s=t,N="ElTabBar",o=oe(),g=se(G);g||ne(N,"<el-tabs><el-tab-bar /></el-tabs>");const P=X("tabs"),_=k(),$=k(),h=()=>{let u=0,T=0;const C=["top","bottom"].includes(g.props.tabPosition)?"width":"height",m=C==="width"?"x":"y";return s.tabs.every(e=>{var a,n,f,R;const M=(n=(a=o.parent)==null?void 0:a.refs)==null?void 0:n[`tab-${e.paneName}`];if(!M)return!1;if(!e.active)return!0;T=M[`client${F(C)}`];const L=m==="x"?"left":"top";u=M.getBoundingClientRect()[L]-((R=(f=M.parentElement)==null?void 0:f.getBoundingClientRect()[L])!=null?R:0);const O=window.getComputedStyle(M);return C==="width"&&(s.tabs.length>1&&(T-=Number.parseFloat(O.paddingLeft)+Number.parseFloat(O.paddingRight)),u+=Number.parseFloat(O.paddingLeft)),!1}),{[C]:`${T}px`,transform:`translate${F(m)}(${u}px)`}},y=()=>$.value=h();return V(()=>s.tabs,async()=>{await Q(),y()},{immediate:!0}),de(_,()=>y()),r({ref:_,update:y}),(u,T)=>(S(),A("div",{ref_key:"barRef",ref:_,class:fe([x(P).e("active-bar"),x(P).is(x(g).props.tabPosition)]),style:$e($.value)},null,6))}});var tt=he(et,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const at=W({panes:{type:H(Array),default:()=>_e([])},currentName:{type:[String,Number],default:""},editable:Boolean,onTabClick:{type:H(Function),default:le},onTabRemove:{type:H(Function),default:le},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ue="ElTabNav",st=J({name:ue,props:at,setup(t,{expose:r}){const s=oe(),N=se(G);N||ne(ue,"<el-tabs><tab-nav /></el-tabs>");const o=X("tabs"),g=Ce(),P=Ne(),_=k(),$=k(),h=k(),y=k(!1),u=k(0),T=k(!1),C=k(!0),m=K(()=>["top","bottom"].includes(N.props.tabPosition)?"width":"height"),e=K(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${u.value}px)`})),a=()=>{if(!_.value)return;const c=_.value[`offset${F(m.value)}`],p=u.value;if(!p)return;const i=p>c?p-c:0;u.value=i},n=()=>{if(!_.value||!$.value)return;const c=$.value[`offset${F(m.value)}`],p=_.value[`offset${F(m.value)}`],i=u.value;if(c-i<=p)return;const d=c-i>p*2?i+p:c-p;u.value=d},f=async()=>{const c=$.value;if(!y.value||!h.value||!_.value||!c)return;await Q();const p=h.value.querySelector(".is-active");if(!p)return;const i=_.value,d=["top","bottom"].includes(N.props.tabPosition),b=p.getBoundingClientRect(),v=i.getBoundingClientRect(),B=d?c.offsetWidth-v.width:c.offsetHeight-v.height,E=u.value;let w=E;d?(b.left<v.left&&(w=E-(v.left-b.left)),b.right>v.right&&(w=E+b.right-v.right)):(b.top<v.top&&(w=E-(v.top-b.top)),b.bottom>v.bottom&&(w=E+(b.bottom-v.bottom))),w=Math.max(w,0),u.value=Math.min(w,B)},R=()=>{if(!$.value||!_.value)return;const c=$.value[`offset${F(m.value)}`],p=_.value[`offset${F(m.value)}`],i=u.value;if(p<c){const d=u.value;y.value=y.value||{},y.value.prev=d,y.value.next=d+p<c,c-d<p&&(u.value=c-p)}else y.value=!1,i>0&&(u.value=0)},M=c=>{const p=c.code,{up:i,down:d,left:b,right:v}=q;if(![i,d,b,v].includes(p))return;const B=Array.from(c.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),E=B.indexOf(c.target);let w;p===b||p===i?E===0?w=B.length-1:w=E-1:E<B.length-1?w=E+1:w=0,B[w].focus(),B[w].click(),L()},L=()=>{C.value&&(T.value=!0)},O=()=>T.value=!1;return V(g,c=>{c==="hidden"?C.value=!1:c==="visible"&&setTimeout(()=>C.value=!0,50)}),V(P,c=>{c?setTimeout(()=>C.value=!0,50):C.value=!1}),de(h,R),be(()=>setTimeout(()=>f(),0)),Te(()=>R()),r({scrollToActiveTab:f,removeFocus:O}),V(()=>t.panes,()=>s.update(),{flush:"post"}),()=>{const c=y.value?[l("span",{class:[o.e("nav-prev"),o.is("disabled",!y.value.prev)],onClick:a},[l(j,null,{default:()=>[l(We,null,null)]})]),l("span",{class:[o.e("nav-next"),o.is("disabled",!y.value.next)],onClick:n},[l(j,null,{default:()=>[l(Je,null,null)]})])]:null,p=t.panes.map((i,d)=>{var b,v,B,E;const w=i.props.disabled,U=(v=(b=i.props.name)!=null?b:i.index)!=null?v:`${d}`,Z=!w&&(i.isClosable||t.editable);i.index=`${d}`;const ye=Z?l(j,{class:"is-icon-close",onClick:I=>t.onTabRemove(i,I)},{default:()=>[l(Qe,null,null)]}):null,Pe=((E=(B=i.slots).label)==null?void 0:E.call(B))||i.props.label,we=!w&&i.active?0:-1;return l("div",{ref:`tab-${U}`,class:[o.e("item"),o.is(N.props.tabPosition),o.is("active",i.active),o.is("disabled",w),o.is("closable",Z),o.is("focus",T.value)],id:`tab-${U}`,key:`tab-${U}`,"aria-controls":`pane-${U}`,role:"tab","aria-selected":i.active,tabindex:we,onFocus:()=>L(),onBlur:()=>O(),onClick:I=>{O(),t.onTabClick(i,U,I)},onKeydown:I=>{Z&&(I.code===q.delete||I.code===q.backspace)&&t.onTabRemove(i,I)}},[Pe,ye])});return l("div",{ref:h,class:[o.e("nav-wrap"),o.is("scrollable",!!y.value),o.is(N.props.tabPosition)]},[c,l("div",{class:o.e("nav-scroll"),ref:_},[l("div",{class:[o.e("nav"),o.is(N.props.tabPosition),o.is("stretch",t.stretch&&["top","bottom"].includes(N.props.tabPosition))],ref:$,style:e.value,role:"tablist",onKeydown:M},[t.type?null:l(tt,{tabs:[...t.panes]},null),p])])])}}}),ot=W({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:H(Function),default:()=>!0},stretch:Boolean}),te=t=>xe(t)||Ee(t),nt={[pe]:t=>te(t),"tab-click":(t,r)=>r instanceof Event,"tab-change":t=>te(t),edit:(t,r)=>["remove","add"].includes(r),"tab-remove":t=>te(t),"tab-add":()=>!0};var lt=J({name:"ElTabs",props:ot,emits:nt,setup(t,{emit:r,slots:s,expose:N}){var o,g;const P=X("tabs"),_=k(),$=ve({}),h=k((g=(o=t.modelValue)!=null?o:t.activeName)!=null?g:"0"),y=e=>{h.value=e,r(pe,e),r("tab-change",e)},u=async e=>{var a,n,f;if(!(h.value===e||ie(e)))try{await((a=t.beforeLeave)==null?void 0:a.call(t,e,h.value))!==!1&&(y(e),(f=(n=_.value)==null?void 0:n.removeFocus)==null||f.call(n))}catch{}},T=(e,a,n)=>{e.props.disabled||(u(a),r("tab-click",e,n))},C=(e,a)=>{e.props.disabled||ie(e.props.name)||(a.stopPropagation(),r("edit",e.props.name,"remove"),r("tab-remove",e.props.name))},m=()=>{r("edit",void 0,"add"),r("tab-add")};return He({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},K(()=>!!t.activeName)),V(()=>t.activeName,e=>u(e)),V(()=>t.modelValue,e=>u(e)),V(h,async()=>{var e;await Q(),(e=_.value)==null||e.scrollToActiveTab()}),ke(G,{props:t,currentName:h,registerPane:n=>$[n.uid]=n,unregisterPane:n=>delete $[n]}),N({currentName:h}),()=>{const e=t.editable||t.addable?l("span",{class:P.e("new-tab"),tabindex:"0",onClick:m,onKeydown:f=>{f.code===q.enter&&m()}},[l(j,{class:P.is("icon-plus")},{default:()=>[l(Xe,null,null)]})]):null,a=l("div",{class:[P.e("header"),P.is(t.tabPosition)]},[e,l(st,{ref:_,currentName:h.value,editable:t.editable,type:t.type,panes:Object.values($),stretch:t.stretch,onTabClick:T,onTabRemove:C},null)]),n=l("div",{class:P.e("content")},[me(s,"default")]);return l("div",{class:[P.b(),P.m(t.tabPosition),{[P.m("card")]:t.type==="card",[P.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[a,n]:[n,a]])}}});const rt=W({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ct=["id","aria-hidden","aria-labelledby"],it={name:"ElTabPane"},ut=J({...it,props:rt,setup(t){const r=t,s="ElTabPane",N=oe(),o=Se(),g=se(G);g||ne(s,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const P=X("tab-pane"),_=k(),$=K(()=>r.closable||g.props.closable),h=re(()=>{var m;return g.currentName.value===((m=r.name)!=null?m:_.value)}),y=k(h.value),u=K(()=>{var m;return(m=r.name)!=null?m:_.value}),T=re(()=>!r.lazy||y.value||h.value);V(h,m=>{m&&(y.value=!0)});const C=ve({uid:N.uid,slots:o,props:r,paneName:u,active:h,index:_,isClosable:$});return be(()=>{g.registerPane(C)}),Be(()=>{g.unregisterPane(C.uid)}),(m,e)=>x(T)?Re((S(),A("div",{key:0,id:`pane-${x(u)}`,class:fe(x(P).b()),role:"tabpanel","aria-hidden":!x(h),"aria-labelledby":`tab-${x(u)}`},[me(m.$slots,"default")],10,ct)),[[Me,x(h)]]):ae("v-if",!0)}});var ge=he(ut,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const dt=Oe(lt,{TabPane:ge}),ft=ze(ge);const bt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},vt=D("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32z"},null,-1),mt=[vt];function pt(t,r){return S(),A("svg",bt,mt)}const _t={name:"ep-switch",render:pt},ht={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},gt=D("path",{fill:"currentColor",d:"M754.752 480H160a32 32 0 1 0 0 64h594.752L521.344 777.344a32 32 0 0 0 45.312 45.312l288-288a32 32 0 0 0 0-45.312l-288-288a32 32 0 1 0-45.312 45.312L754.752 480z"},null,-1),yt=[gt];function Pt(t,r){return S(),A("svg",ht,yt)}const wt={name:"ep-right",render:Pt},$t={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ct=D("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),Nt=D("path",{fill:"currentColor",d:"m237.248 512l265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),Tt=[Ct,Nt];function kt(t,r){return S(),A("svg",$t,Tt)}const xt={name:"ep-back",render:kt},Et={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},St=D("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Bt=[St];function Rt(t,r){return S(),A("svg",Et,Bt)}const Mt={name:"ep-refresh",render:Rt},Ot={class:"inline-flex items-center"},zt=Y("\u5237\u65B0"),Vt=Y("\u5173\u95ED\u5DE6\u4FA7 "),At=Y("\u5173\u95ED\u53F3\u4FA7 "),Lt=Y("\u5173\u95ED\u5176\u4ED6 "),Xt={__name:"layout-tabs",setup(t){const r=k([]),s=Ve(),N=Ae(),o=Ie(),g=Ue(),P=k(o.fullPath);Le(e=>{P.value=e.fullPath});const _=(e,a)=>{a?r.value[e]=a:r.value.splice(e,1)},$=(e,a)=>{a&&r.value.forEach((n,f)=>{f!==e&&n?.handleClose()})},h=e=>{const a=s.routes.findIndex(f=>f.fullPath===o.fullPath),n=s.routes[e];e!==a&&g.push({path:n.fullPath}),s.isRefreshing=!0,Q(()=>{s.isRefreshing=!1})},y=e=>{if(s.routes.length>1){const a=s.routes.findIndex(f=>f.fullPath===e),n=s.routes.findIndex(f=>f.fullPath===o.fullPath);s.routes.splice(a,1),a===n&&(s.routes[a]?g.push(s.routes[a]):g.push(s.routes[a-1]))}},u=e=>{const a=s.routes.findIndex(f=>f.fullPath===o.fullPath),n=s.routes[e];s.routes.splice(0,e),a<e&&g.push(n)},T=e=>{const a=s.routes.findIndex(n=>n.fullPath===o.fullPath);s.routes.splice(e+1,s.routes.length-e),a>e&&g.push(s.routes[e])},C=e=>{T(e),u(e),s.routes[0].fullPath!==o.fullPath&&g.push(s.routes[0])},m=e=>{e.active||g.push(e.props.name)};return(e,a)=>{const n=Mt,f=Ke,R=xt,M=wt,L=_t,O=Ye,c=je,p=ft,i=dt;return S(),ee(i,{modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=d=>P.value=d),type:"border-card",class:"router-tab w-full",onTabRemove:y,onTabClick:m},{default:z(()=>[(S(!0),A(ce,null,Fe(x(s).routes,(d,b)=>(S(),A(ce,{key:d.fullPath},[!d.meta.requiresAuth||x(N).hasPermission(d.meta?.permission)?(S(),ee(p,{key:0,modelValue:d.fullPath,"onUpdate:modelValue":v=>d.fullPath=v,name:d.fullPath,closable:x(s).routes.length>1},{label:z(()=>[l(c,{ref_for:!0,ref:v=>_(b,v),class:"h-full",trigger:"contextmenu",onVisibleChange:v=>$(b,v)},{dropdown:z(()=>[l(O,null,{default:z(()=>[l(f,{onClick:v=>h(b)},{default:z(()=>[l(n),zt]),_:2},1032,["onClick"]),l(f,{disabled:b===0,onClick:v=>u(b)},{default:z(()=>[l(R),Vt]),_:2},1032,["disabled","onClick"]),l(f,{disabled:b===x(s).routes.length-1,onClick:v=>T(b)},{default:z(()=>[l(M),At]),_:2},1032,["disabled","onClick"]),l(f,{disabled:b===0&&b===x(s).routes.length-1,onClick:v=>C(b)},{default:z(()=>[l(L),Lt]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),default:z(()=>[D("span",Ot,[d.meta.icon?(S(),ee(qe,{key:0,name:d.meta.icon},null,8,["name"])):ae("",!0),Y(" "+De(d.meta?.title??d.fullPath),1)])]),_:2},1032,["onVisibleChange"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","closable"])):ae("",!0)],64))),128))]),_:1},8,["modelValue"])}}};export{Xt as default};
