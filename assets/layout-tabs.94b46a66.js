import{H as j,R as oe,ap as fe,i as W,I as ne,j as X,k as T,V as O,X as Q,W as be,o as x,p as V,n as ve,e as k,v as $e,_ as pe,am as le,aq as Ne,ar as Te,c as H,m as me,$ as ke,d as c,E as q,as as Ee,at as xe,a1 as Se,au as K,Z as _e,Y as Re,av as Be,q as he,aw as ce,ax as Me,S as ze,A as Ae,ay as ie,az as Oe,M as Ve,N as Le,f as se,z as Ie,B as De,O as F,a as Fe,a4 as Ue,aA as He,b as te,w as z,g as Ye,a5 as qe,Q as ue,a6 as Y,a2 as Ke,a7 as je}from"./index.8e778151.js";import{u as We}from"./el-button.28ca19a9.js";import{c as I,U as ge}from"./el-popper.1d78828b.js";import{E as Xe,a as Qe,b as Ze}from"./el-dropdown-item.5e184abf.js";import{_ as Ge}from"./svg-icon.038636ce.js";import{t as re}from"./index.09c7de01.js";import"./index.39731a06.js";import"./refs.01489d3a.js";/* empty css                */const Z=Symbol("tabsRootContextKey"),Je=j({tabs:{type:oe(Array),default:()=>fe([])}}),et={name:"ElTabBar"},tt=W({...et,props:Je,setup(t,{expose:l}){const s=t,B="ElTabBar",h=le(),o=ne(Z);o||re(B,"<el-tabs><el-tab-bar /></el-tabs>");const g=X("tabs"),w=T(),y=T(),d=()=>{let u=0,m=0;const $=["top","bottom"].includes(o.props.tabPosition)?"width":"height",_=$==="width"?"x":"y";return s.tabs.every(e=>{var n,r,f,M;const S=(r=(n=h.parent)==null?void 0:n.refs)==null?void 0:r[`tab-${e.uid}`];if(!S)return!1;if(!e.active)return!0;m=S[`client${I($)}`];const D=_==="x"?"left":"top";u=S.getBoundingClientRect()[D]-((M=(f=S.parentElement)==null?void 0:f.getBoundingClientRect()[D])!=null?M:0);const A=window.getComputedStyle(S);return $==="width"&&(s.tabs.length>1&&(m-=Number.parseFloat(A.paddingLeft)+Number.parseFloat(A.paddingRight)),u+=Number.parseFloat(A.paddingLeft)),!1}),{[$]:`${m}px`,transform:`translate${I(_)}(${u}px)`}},C=()=>y.value=d();return O(()=>s.tabs,async()=>{await Q(),C()},{immediate:!0}),be(w,()=>C()),l({ref:w,update:C}),(u,m)=>(x(),V("div",{ref_key:"barRef",ref:w,class:ve([k(g).e("active-bar"),k(g).is(k(o).props.tabPosition)]),style:$e(y.value)},null,6))}});var at=pe(tt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const st=j({panes:{type:oe(Array),default:()=>fe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ot={tabClick:(t,l,s)=>s instanceof Event,tabRemove:(t,l)=>l instanceof Event},de="ElTabNav",nt=W({name:de,props:st,emits:ot,setup(t,{expose:l,emit:s}){const B=le(),h=ne(Z);h||re(de,"<el-tabs><tab-nav /></el-tabs>");const o=X("tabs"),g=Ne(),w=Te(),y=T(),d=T(),C=T(),u=T(!1),m=T(0),$=T(!1),_=T(!0),e=H(()=>["top","bottom"].includes(h.props.tabPosition)?"width":"height"),n=H(()=>({transform:`translate${e.value==="width"?"X":"Y"}(-${m.value}px)`})),r=()=>{if(!y.value)return;const i=y.value[`offset${I(e.value)}`],b=m.value;if(!b)return;const a=b>i?b-i:0;m.value=a},f=()=>{if(!y.value||!d.value)return;const i=d.value[`offset${I(e.value)}`],b=y.value[`offset${I(e.value)}`],a=m.value;if(i-a<=b)return;const v=i-a>b*2?a+b:i-b;m.value=v},M=async()=>{const i=d.value;if(!u.value||!C.value||!y.value||!i)return;await Q();const b=C.value.querySelector(".is-active");if(!b)return;const a=y.value,v=["top","bottom"].includes(h.props.tabPosition),p=b.getBoundingClientRect(),N=a.getBoundingClientRect(),R=v?i.offsetWidth-N.width:i.offsetHeight-N.height,E=m.value;let P=E;v?(p.left<N.left&&(P=E-(N.left-p.left)),p.right>N.right&&(P=E+p.right-N.right)):(p.top<N.top&&(P=E-(N.top-p.top)),p.bottom>N.bottom&&(P=E+(p.bottom-N.bottom))),P=Math.max(P,0),m.value=Math.min(P,R)},S=()=>{if(!d.value||!y.value)return;const i=d.value[`offset${I(e.value)}`],b=y.value[`offset${I(e.value)}`],a=m.value;if(b<i){const v=m.value;u.value=u.value||{},u.value.prev=v,u.value.next=v+b<i,i-v<b&&(m.value=i-b)}else u.value=!1,a>0&&(m.value=0)},D=i=>{const b=i.code,{up:a,down:v,left:p,right:N}=K;if(![a,v,p,N].includes(b))return;const R=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),E=R.indexOf(i.target);let P;b===p||b===a?E===0?P=R.length-1:P=E-1:E<R.length-1?P=E+1:P=0,R[P].focus(),R[P].click(),A()},A=()=>{_.value&&($.value=!0)},U=()=>$.value=!1;return O(g,i=>{i==="hidden"?_.value=!1:i==="visible"&&setTimeout(()=>_.value=!0,50)}),O(w,i=>{i?setTimeout(()=>_.value=!0,50):_.value=!1}),be(C,S),me(()=>setTimeout(()=>M(),0)),ke(()=>S()),l({scrollToActiveTab:M,removeFocus:U}),O(()=>t.panes,()=>B.update(),{flush:"post"}),()=>{const i=u.value?[c("span",{class:[o.e("nav-prev"),o.is("disabled",!u.value.prev)],onClick:r},[c(q,null,{default:()=>[c(Ee,null,null)]})]),c("span",{class:[o.e("nav-next"),o.is("disabled",!u.value.next)],onClick:f},[c(q,null,{default:()=>[c(xe,null,null)]})])]:null,b=t.panes.map((a,v)=>{var p,N,R,E;const P=a.uid,G=a.props.disabled,J=(N=(p=a.props.name)!=null?p:a.index)!=null?N:`${v}`,ee=!G&&(a.isClosable||t.editable);a.index=`${v}`;const Pe=ee?c(q,{class:"is-icon-close",onClick:L=>s("tabRemove",a,L)},{default:()=>[c(Se,null,null)]}):null,we=((E=(R=a.slots).label)==null?void 0:E.call(R))||a.props.label,Ce=!G&&a.active?0:-1;return c("div",{ref:`tab-${P}`,class:[o.e("item"),o.is(h.props.tabPosition),o.is("active",a.active),o.is("disabled",G),o.is("closable",ee),o.is("focus",$.value)],id:`tab-${J}`,key:`tab-${P}`,"aria-controls":`pane-${J}`,role:"tab","aria-selected":a.active,tabindex:Ce,onFocus:()=>A(),onBlur:()=>U(),onClick:L=>{U(),s("tabClick",a,J,L)},onKeydown:L=>{ee&&(L.code===K.delete||L.code===K.backspace)&&s("tabRemove",a,L)}},[we,Pe])});return c("div",{ref:C,class:[o.e("nav-wrap"),o.is("scrollable",!!u.value),o.is(h.props.tabPosition)]},[i,c("div",{class:o.e("nav-scroll"),ref:y},[c("div",{class:[o.e("nav"),o.is(h.props.tabPosition),o.is("stretch",t.stretch&&["top","bottom"].includes(h.props.tabPosition))],ref:d,style:n.value,role:"tablist",onKeydown:D},[t.type?null:c(at,{tabs:[...t.panes]},null),b])])])}}}),lt=j({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:oe(Function),default:()=>!0},stretch:Boolean}),ae=t=>Me(t)||ze(t),rt={[ge]:t=>ae(t),tabClick:(t,l)=>l instanceof Event,tabChange:t=>ae(t),edit:(t,l)=>["remove","add"].includes(l),tabRemove:t=>ae(t),tabAdd:()=>!0};var ct=W({name:"ElTabs",props:lt,emits:rt,setup(t,{emit:l,slots:s,expose:B}){var h,o;const g=X("tabs"),w=T(),y=_e({}),d=T((o=(h=t.modelValue)!=null?h:t.activeName)!=null?o:"0"),C=e=>{d.value=e,l(ge,e),l("tabChange",e)},u=async e=>{var n,r,f;if(!(d.value===e||ce(e)))try{await((n=t.beforeLeave)==null?void 0:n.call(t,e,d.value))!==!1&&(C(e),(f=(r=w.value)==null?void 0:r.removeFocus)==null||f.call(r))}catch{}},m=(e,n,r)=>{e.props.disabled||(u(n),l("tabClick",e,r))},$=(e,n)=>{e.props.disabled||ce(e.props.name)||(n.stopPropagation(),l("edit",e.props.name,"remove"),l("tabRemove",e.props.name))},_=()=>{l("edit",void 0,"add"),l("tabAdd")};return We({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},H(()=>!!t.activeName)),O(()=>t.activeName,e=>u(e)),O(()=>t.modelValue,e=>u(e)),O(d,async()=>{var e;await Q(),(e=w.value)==null||e.scrollToActiveTab()}),Re(Z,{props:t,currentName:d,registerPane:r=>y[r.uid]=r,unregisterPane:r=>delete y[r]}),B({currentName:d}),()=>{const e=t.editable||t.addable?c("span",{class:g.e("new-tab"),tabindex:"0",onClick:_,onKeydown:f=>{f.code===K.enter&&_()}},[c(q,{class:g.is("icon-plus")},{default:()=>[c(Be,null,null)]})]):null,n=c("div",{class:[g.e("header"),g.is(t.tabPosition)]},[e,c(nt,{ref:w,currentName:d.value,editable:t.editable,type:t.type,panes:Object.values(y),stretch:t.stretch,onTabClick:m,onTabRemove:$},null)]),r=c("div",{class:g.e("content")},[he(s,"default")]);return c("div",{class:[g.b(),g.m(t.tabPosition),{[g.m("card")]:t.type==="card",[g.m("border-card")]:t.type==="border-card"}]},[...t.tabPosition!=="bottom"?[n,r]:[r,n]])}}});const it=j({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ut=["id","aria-hidden","aria-labelledby"],dt={name:"ElTabPane"},ft=W({...dt,props:it,setup(t){const l=t,s="ElTabPane",B=le(),h=Ae(),o=ne(Z);o||re(s,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const g=X("tab-pane"),w=T(),y=H(()=>l.closable||o.props.closable),d=ie(()=>{var _;return o.currentName.value===((_=l.name)!=null?_:w.value)}),C=T(d.value),u=H(()=>{var _;return(_=l.name)!=null?_:w.value}),m=ie(()=>!l.lazy||C.value||d.value);O(d,_=>{_&&(C.value=!0)});const $=_e({uid:B.uid,slots:h,props:l,paneName:u,active:d,index:w,isClosable:y});return me(()=>{o.registerPane($)}),Oe(()=>{o.unregisterPane($.uid)}),(_,e)=>k(m)?Ve((x(),V("div",{key:0,id:`pane-${k(u)}`,class:ve(k(g).b()),role:"tabpanel","aria-hidden":!k(d),"aria-labelledby":`tab-${k(u)}`},[he(_.$slots,"default")],10,ut)),[[Le,k(d)]]):se("v-if",!0)}});var ye=pe(ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const bt=Ie(ct,{TabPane:ye}),vt=De(ye);const pt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},mt=F("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 0 1 0-45.248L416 96l4.48-3.776A32 32 0 0 1 461.248 96l3.712 4.48a32.064 32.064 0 0 1-3.712 40.832L218.56 384H928a32 32 0 1 1 0 64H141.248a32 32 0 0 1-22.592-9.344zM64 608a32 32 0 0 1 32-32h786.752a32 32 0 0 1 22.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 0 1-40.832-49.024L805.632 640H96a32 32 0 0 1-32-32z"},null,-1),_t=[mt];function ht(t,l){return x(),V("svg",pt,_t)}const gt={name:"ep-switch",render:ht},yt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Pt=F("path",{fill:"currentColor",d:"M754.752 480H160a32 32 0 1 0 0 64h594.752L521.344 777.344a32 32 0 0 0 45.312 45.312l288-288a32 32 0 0 0 0-45.312l-288-288a32 32 0 1 0-45.312 45.312L754.752 480z"},null,-1),wt=[Pt];function Ct(t,l){return x(),V("svg",yt,wt)}const $t={name:"ep-right",render:Ct},Nt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Tt=F("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),kt=F("path",{fill:"currentColor",d:"m237.248 512l265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),Et=[Tt,kt];function xt(t,l){return x(),V("svg",Nt,Et)}const St={name:"ep-back",render:xt},Rt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Bt=F("path",{fill:"currentColor",d:"M771.776 794.88A384 384 0 0 1 128 512h64a320 320 0 0 0 555.712 216.448H654.72a32 32 0 1 1 0-64h149.056a32 32 0 0 1 32 32v148.928a32 32 0 1 1-64 0v-50.56zM276.288 295.616h92.992a32 32 0 0 1 0 64H220.16a32 32 0 0 1-32-32V178.56a32 32 0 0 1 64 0v50.56A384 384 0 0 1 896.128 512h-64a320 320 0 0 0-555.776-216.384z"},null,-1),Mt=[Bt];function zt(t,l){return x(),V("svg",Rt,Mt)}const At={name:"ep-refresh",render:zt},Ot={class:"inline-flex items-center"},Vt=Y("\u5237\u65B0"),Lt=Y("\u5173\u95ED\u5DE6\u4FA7 "),It=Y("\u5173\u95ED\u53F3\u4FA7 "),Dt=Y("\u5173\u95ED\u5176\u4ED6 "),Qt={__name:"layout-tabs",setup(t){const l=T([]),s=Fe(),B=Ue(),h=Ye(),o=je(),g=T(h.fullPath);He(e=>{g.value=e.fullPath});const w=(e,n)=>{n?l.value[e]=n:l.value.splice(e,1)},y=(e,n)=>{n&&l.value.forEach((r,f)=>{f!==e&&r?.handleClose()})},d=e=>{const n=s.routes.findIndex(f=>f.fullPath===h.fullPath),r=s.routes[e];e!==n&&o.push({path:r.fullPath}),s.isRefreshing=!0,Q(()=>{s.isRefreshing=!1})},C=e=>{if(s.routes.length>1){const n=s.routes.findIndex(f=>f.fullPath===e),r=s.routes.findIndex(f=>f.fullPath===h.fullPath);s.routes.splice(n,1),n===r&&(s.routes[n]?o.push(s.routes[n]):o.push(s.routes[n-1]))}},u=e=>{const n=s.routes.findIndex(f=>f.fullPath===h.fullPath),r=s.routes[e];s.routes.splice(0,e),n<e&&o.push(r)},m=e=>{const n=s.routes.findIndex(r=>r.fullPath===h.fullPath);s.routes.splice(e+1,s.routes.length-e),n>e&&o.push(s.routes[e])},$=e=>{m(e),u(e),s.routes[0].fullPath!==h.fullPath&&o.push(s.routes[0])},_=e=>{e.active||o.push(e.props.name)};return(e,n)=>{const r=At,f=Xe,M=St,S=$t,D=gt,A=Qe,U=Ze,i=vt,b=bt;return x(),te(b,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=a=>g.value=a),type:"border-card",class:"router-tab w-full",onTabRemove:C,onTabClick:_},{default:z(()=>[(x(!0),V(ue,null,qe(k(s).routes,(a,v)=>(x(),V(ue,{key:a.fullPath},[!a.meta.requiresAuth||k(B).hasPermission(a.meta?.permission)?(x(),te(i,{key:0,modelValue:a.fullPath,"onUpdate:modelValue":p=>a.fullPath=p,name:a.fullPath,closable:k(s).routes.length>1},{label:z(()=>[c(U,{ref_for:!0,ref:p=>w(v,p),class:"h-full",trigger:"contextmenu",onVisibleChange:p=>y(v,p)},{dropdown:z(()=>[c(A,null,{default:z(()=>[c(f,{onClick:p=>d(v)},{default:z(()=>[c(r),Vt]),_:2},1032,["onClick"]),c(f,{disabled:v===0,onClick:p=>u(v)},{default:z(()=>[c(M),Lt]),_:2},1032,["disabled","onClick"]),c(f,{disabled:v===k(s).routes.length-1,onClick:p=>m(v)},{default:z(()=>[c(S),It]),_:2},1032,["disabled","onClick"]),c(f,{disabled:v===0&&v===k(s).routes.length-1,onClick:p=>$(v)},{default:z(()=>[c(D),Dt]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),default:z(()=>[F("span",Ot,[a.meta.icon?(x(),te(Ge,{key:0,name:a.meta.icon},null,8,["name"])):se("",!0),Y(" "+Ke(a.meta?.title??a.fullPath),1)])]),_:2},1032,["onVisibleChange"])]),_:2},1032,["modelValue","onUpdate:modelValue","name","closable"])):se("",!0)],64))),128))]),_:1},8,["modelValue"])}}};export{Qt as default};
