import{U as h,j as w,ad as y,m as k,J as c,d as e,w as t,B as b,o as x,a8 as i,af as V,g as v,h as E}from"./index.b2875c3e.js";import{b as B}from"./el-form-item.2647fa6b.js";import{E as R}from"./el-button.157702e2.js";import{E as U}from"./el-checkbox.c209fb03.js";import{_ as q,r as C}from"./app-form.00c84a09.js";import N from"./header-logo.ddcba485.js";import"./index.4d993eb4.js";import"./plugin-vue_export-helper.a0554eae.js";import"./index.38fcb330.js";import"./icon.68a11d83.js";import"./index.89744426.js";/* empty css                */import"./svg-icon.1bc99cb2.js";import"./el-space.6432a772.js";const M={class:"center"},$={style:{width:"320px"}},j={class:"between w-full"},I=i("\u5FD8\u8BB0\u5BC6\u7801"),S=i("\u767B\u5F55"),T=i("\u6CE8\u518C\u8D26\u53F7"),Z={__name:"login",setup(z){const r=h({action:"user/login",data:null,schema:{title:"\u767B\u5F55",type:"object",properties:{userName:{type:"string",default:null,placeholder:"\u7528\u6237\u540D",prefix:"user",rules:[{required:!0,trigger:"change"}]},password:{type:"string",default:null,placeholder:"\u5BC6\u7801",prefix:"lock",inputType:"password",showPassword:!0,rules:[{required:!0,trigger:"change"}]},rememberMe:{skip:!0,default:!1}}}}),m=w(null),f=V(),_=v(),d=y(),g=async n=>{console.log(n);const{token:o}=n;await d.login(o);const s=await C.post("user/info"),a=s.data?.code?s.data.data:s.data;d.setUserInfo(a),f.push({path:_.query.redirect??"/"})};return(n,o)=>{const s=U,a=R,p=E("router-link"),u=B;return x(),k("div",M,[c("div",$,[e(q,{ref_key:"formRef",ref:m,modelValue:r,"onUpdate:modelValue":o[2]||(o[2]=l=>b(r)?r.value=l:null),class:"text-center",onAfter:g},{header:t(()=>[e(N,{class:"m-4"})]),footer:t(()=>[e(u,null,{default:t(()=>[c("div",j,[e(s,{modelValue:r.data.rememberMe,"onUpdate:modelValue":o[0]||(o[0]=l=>r.data.rememberMe=l),label:"\u8BB0\u4F4F\u5BC6\u7801",size:"large"},null,8,["modelValue"]),e(p,{to:"/forgot-password"},{default:t(()=>[e(a,{type:"primary",link:""},{default:t(()=>[I]),_:1})]),_:1})])]),_:1}),e(u,null,{default:t(()=>[e(a,{type:"primary",class:"w-full",onClick:o[1]||(o[1]=l=>m.value.submit())},{default:t(()=>[S]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(p,{to:"/register",class:"w-full text-center"},{default:t(()=>[e(a,{type:"primary",link:""},{default:t(()=>[T]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])}}};export{Z as default};
