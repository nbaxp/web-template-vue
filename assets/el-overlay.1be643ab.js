import{m as V,ah as Z,O as _,X as P,L as G,j as W,ai as J,S as U,aj as z,C as N,ak as K,al as Q,am as R,an as ee,ao as D,N as F,V as Y,i as oe,d as te,q as A,ap as ne,a4 as se,aq as le,ar as ae,k,J as ue,as as ce,c as X,Z as ie,at as de,au as H}from"./index.f2b0fb39.js";import{P as I}from"./vnode.6ba4b3ec.js";import{U as j}from"./el-button.e2528e7d.js";import{t as re,u as $}from"./index.9c25ca14.js";import{g as fe}from"./el-select.bab01ab5.js";const Me=(e,o,s)=>{let t={offsetX:0,offsetY:0};const l=d=>{const a=d.clientX,m=d.clientY,{offsetX:r,offsetY:v}=t,c=e.value.getBoundingClientRect(),f=c.left,C=c.top,B=c.width,O=c.height,S=document.documentElement.clientWidth,T=document.documentElement.clientHeight,L=-f+r,b=-C+v,p=S-f-B+r,g=T-C-O+v,E=y=>{const w=Math.min(Math.max(r+y.clientX-a,L),p),x=Math.min(Math.max(v+y.clientY-m,b),g);t={offsetX:w,offsetY:x},e.value.style.transform=`translate(${P(w)}, ${P(x)})`},h=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",h)},u=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",l)},n=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",l)};V(()=>{Z(()=>{s.value?u():n()})}),_(()=>{n()})},me=e=>{G(e)||re("[useLockscreen]","You need to pass a ref param to this function");const o=W("popup"),s=J(()=>o.bm("parent","hidden"));if(!U||z(document.body,s.value))return;let t=0,l=!1,u="0";const n=()=>{ee(document.body,s.value),l&&(document.body.style.width=u)};N(e,d=>{if(!d){n();return}l=!z(document.body,s.value),l&&(u=document.body.style.width),t=fe(o.namespace.value);const a=document.documentElement.clientHeight<document.body.scrollHeight,m=K(document.body,"overflowY");t>0&&(a||m==="scroll")&&l&&(document.body.style.width=`calc(100% - ${t}px)`),Q(document.body,s.value)}),R(()=>n())},ve=e=>{if(!e)return{onClick:D,onMousedown:D,onMouseup:D};let o=!1,s=!1;return{onClick:n=>{o&&s&&e(n),o=s=!1},onMousedown:n=>{o=n.target===n.currentTarget},onMouseup:n=>{s=n.target===n.currentTarget}}},ye=F({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Y([String,Array,Object])},zIndex:{type:Y([String,Number])}}),pe={click:e=>e instanceof MouseEvent};var ge=oe({name:"ElOverlay",props:ye,emits:pe,setup(e,{slots:o,emit:s}){const t=W("overlay"),l=a=>{s("click",a)},{onClick:u,onMousedown:n,onMouseup:d}=ve(e.customMaskEvent?void 0:l);return()=>e.mask?te("div",{class:[t.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:n,onMouseup:d},[A(o,"default")],I.STYLE|I.CLASS|I.PROPS,["onClick","onMouseup","onMousedown"]):ne("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[A(o,"default")])}});const ke=ge,he=F({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:se},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Be={close:()=>!0},Oe=F({...he,appendToBody:{type:Boolean,default:!1},beforeClose:{type:Y(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Se={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[j]:e=>le(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Te=(e,o)=>{const t=de().emit,{nextZIndex:l}=ae();let u="";const n=$(),d=$(),a=k(!1),m=k(!1),r=k(!1),v=k(e.zIndex||l());let c,f;const C=ue("namespace",ce),B=X(()=>{const i={},M=`--${C.value}-dialog`;return e.fullscreen||(e.top&&(i[`${M}-margin-top`]=e.top),e.width&&(i[`${M}-width`]=P(e.width))),i}),O=X(()=>e.alignCenter?{display:"flex"}:{});function S(){t("opened")}function T(){t("closed"),t(j,!1),e.destroyOnClose&&(r.value=!1)}function L(){t("close")}function b(){f?.(),c?.(),e.openDelay&&e.openDelay>0?{stop:c}=H(()=>h(),e.openDelay):h()}function p(){c?.(),f?.(),e.closeDelay&&e.closeDelay>0?{stop:f}=H(()=>y(),e.closeDelay):y()}function g(){function i(M){M||(m.value=!0,a.value=!1)}e.beforeClose?e.beforeClose(i):p()}function E(){e.closeOnClickModal&&g()}function h(){!U||(a.value=!0)}function y(){a.value=!1}function w(){t("openAutoFocus")}function x(){t("closeAutoFocus")}e.lockScroll&&me(a);function q(){e.closeOnPressEscape&&g()}return N(()=>e.modelValue,i=>{i?(m.value=!1,b(),r.value=!0,v.value=e.zIndex?v.value++:l(),ie(()=>{t("open"),o.value&&(o.value.scrollTop=0)})):a.value&&p()}),N(()=>e.fullscreen,i=>{!o.value||(i?(u=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=u)}),V(()=>{e.modelValue&&(a.value=!0,r.value=!0,b())}),{afterEnter:S,afterLeave:T,beforeLeave:L,handleClose:g,onModalClick:E,close:p,doClose:y,onOpenAutoFocus:w,onCloseAutoFocus:x,onCloseRequested:q,titleId:n,bodyId:d,closed:m,style:B,overlayDialogStyle:O,rendered:r,visible:a,zIndex:v}};export{ke as E,Se as a,Me as b,me as c,Oe as d,ve as e,he as f,Be as g,Te as u};
