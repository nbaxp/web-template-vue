import{b2 as je,L as j,C as Ie,N as fe,ax as Ee,O as ge,i as $e,bI as we,bJ as Fe,bK as Ye,j as oe,ai as Se,k as L,bL as De,s as He,c as T,Q as F,S as re,m as Oe,o as b,b as O,d as v,w,J as E,n as V,e as o,x as Xe,f as $,E as P,Y as Ue,p as x,aB as qe,aC as Je,M as z,bM as Ze,bN as We,r as Ge,bO as Ke,bP as Qe,a1 as me,H as be,I as Ne,v as pe,q as U,T as Te,$ as et,_ as ze,l as X,ae as H,bQ as tt,z as Ae,bk as at,aH as lt,Z as he,bu as nt,as as ye,y as st,V as Q,bR as ot,aq as rt,af as G,ac as se,a9 as K,aa as ke,X as Be,a6 as it,bS as ut,a2 as _e,aX as ct,h as dt,bT as Me,b0 as xe,bU as ft}from"./index.70f90e7f.js";import{j as mt,d as pt,u as vt,k as gt,l as bt,E as ht,c as yt,b as Re,e as _t}from"./el-form-item.076284d8.js";import{a as Pe,E as wt}from"./el-button.714d6015.js";/* empty css                */import{_ as Ce}from"./svg-icon.5594b61b.js";var kt=1,xt=4;function Ct(e){return mt(e,kt|xt)}var Lt="Expected a function";function de(e,t,a){var l=!0,n=!0;if(typeof e!="function")throw new TypeError(Lt);return je(a)&&(l="leading"in a?!!a.leading:l,n="trailing"in a?!!a.trailing:n),pt(e,t,{leading:l,maxWait:t,trailing:n})}const Vt=()=>j&&/firefox/i.test(window.navigator.userAgent),It=Ie({urlList:{type:fe(Array),default:()=>Ee([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),Et={close:()=>!0,switch:e=>ge(e)},$t=["src"],St={name:"ElImageViewer"},Ot=$e({...St,props:It,emits:Et,setup(e,{emit:t}){const a=e,l={CONTAIN:{name:"contain",icon:we(Fe)},ORIGINAL:{name:"original",icon:we(Ye)}},n=Vt()?"DOMMouseScroll":"mousewheel",{t:d}=Pe(),u=oe("image-viewer"),{nextZIndex:g}=Se(),k=L(),h=L([]),y=De(),_=L(!0),f=L(a.initialIndex),i=He(l.CONTAIN),r=L({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),m=T(()=>{const{urlList:c}=a;return c.length<=1}),C=T(()=>f.value===0),S=T(()=>f.value===a.urlList.length-1),B=T(()=>a.urlList[f.value]),q=T(()=>{const{scale:c,deg:s,offsetX:p,offsetY:I,enableTransition:M}=r.value;let N=p/c,R=I/c;switch(s%360){case 90:case-270:[N,R]=[R,-N];break;case 180:case-180:[N,R]=[-N,-R];break;case 270:case-90:[N,R]=[-R,N];break}const D={transform:`scale(${c}) rotate(${s}deg) translate(${N}px, ${R}px)`,transition:M?"transform .3s":""};return i.value.name===l.CONTAIN.name&&(D.maxWidth=D.maxHeight="100%"),D}),ie=T(()=>ge(a.zIndex)?a.zIndex:g());function Y(){ue(),t("close")}function J(){const c=de(p=>{switch(p.code){case H.esc:a.closeOnPressEscape&&Y();break;case H.space:W();break;case H.left:ae();break;case H.up:A("zoomIn");break;case H.right:le();break;case H.down:A("zoomOut");break}}),s=de(p=>{(p.wheelDelta?p.wheelDelta:-p.detail)>0?A("zoomIn",{zoomRate:1.2,enableTransition:!1}):A("zoomOut",{zoomRate:1.2,enableTransition:!1})});y.run(()=>{X(document,"keydown",c),X(document,n,s)})}function ue(){y.stop()}function ce(){_.value=!1}function ee(c){_.value=!1,c.target.alt=d("el.image.error")}function te(c){if(_.value||c.button!==0||!k.value)return;r.value.enableTransition=!1;const{offsetX:s,offsetY:p}=r.value,I=c.pageX,M=c.pageY,N=de(D=>{r.value={...r.value,offsetX:s+D.pageX-I,offsetY:p+D.pageY-M}}),R=X(document,"mousemove",N);X(document,"mouseup",()=>{R()}),c.preventDefault()}function Z(){r.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function W(){if(_.value)return;const c=tt(l),s=Object.values(l),p=i.value.name,M=(s.findIndex(N=>N.name===p)+1)%c.length;i.value=l[c[M]],Z()}function ae(){if(C.value&&!a.infinite)return;const c=a.urlList.length;f.value=(f.value-1+c)%c}function le(){if(S.value&&!a.infinite)return;const c=a.urlList.length;f.value=(f.value+1)%c}function A(c,s={}){if(_.value)return;const{zoomRate:p,rotateDeg:I,enableTransition:M}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...s};switch(c){case"zoomOut":r.value.scale>.2&&(r.value.scale=Number.parseFloat((r.value.scale/p).toFixed(3)));break;case"zoomIn":r.value.scale<7&&(r.value.scale=Number.parseFloat((r.value.scale*p).toFixed(3)));break;case"clockwise":r.value.deg+=I;break;case"anticlockwise":r.value.deg-=I;break}r.value.enableTransition=M}return F(B,()=>{re(()=>{const c=h.value[0];c?.complete||(_.value=!0)})}),F(f,c=>{Z(),t("switch",c)}),Oe(()=>{var c,s;J(),(s=(c=k.value)==null?void 0:c.focus)==null||s.call(c)}),(c,s)=>(b(),O(et,{to:"body",disabled:!c.teleported},[v(Te,{name:"viewer-fade",appear:""},{default:w(()=>[E("div",{ref_key:"wrapper",ref:k,tabindex:-1,class:V(o(u).e("wrapper")),style:pe({zIndex:o(ie)})},[E("div",{class:V(o(u).e("mask")),onClick:s[0]||(s[0]=Xe(p=>c.hideOnClickModal&&Y(),["self"]))},null,2),$(" CLOSE "),E("span",{class:V([o(u).e("btn"),o(u).e("close")]),onClick:Y},[v(o(P),null,{default:w(()=>[v(o(Ue))]),_:1})],2),$(" ARROW "),o(m)?$("v-if",!0):(b(),x(z,{key:0},[E("span",{class:V([o(u).e("btn"),o(u).e("prev"),o(u).is("disabled",!c.infinite&&o(C))]),onClick:ae},[v(o(P),null,{default:w(()=>[v(o(qe))]),_:1})],2),E("span",{class:V([o(u).e("btn"),o(u).e("next"),o(u).is("disabled",!c.infinite&&o(S))]),onClick:le},[v(o(P),null,{default:w(()=>[v(o(Je))]),_:1})],2)],64)),$(" ACTIONS "),E("div",{class:V([o(u).e("btn"),o(u).e("actions")])},[E("div",{class:V(o(u).e("actions__inner"))},[v(o(P),{onClick:s[1]||(s[1]=p=>A("zoomOut"))},{default:w(()=>[v(o(Ze))]),_:1}),v(o(P),{onClick:s[2]||(s[2]=p=>A("zoomIn"))},{default:w(()=>[v(o(We))]),_:1}),E("i",{class:V(o(u).e("actions__divider"))},null,2),v(o(P),{onClick:W},{default:w(()=>[(b(),O(Ge(o(i).icon)))]),_:1}),E("i",{class:V(o(u).e("actions__divider"))},null,2),v(o(P),{onClick:s[3]||(s[3]=p=>A("anticlockwise"))},{default:w(()=>[v(o(Ke))]),_:1}),v(o(P),{onClick:s[4]||(s[4]=p=>A("clockwise"))},{default:w(()=>[v(o(Qe))]),_:1})],2)],2),$(" CANVAS "),E("div",{class:V(o(u).e("canvas"))},[(b(!0),x(z,null,me(c.urlList,(p,I)=>be((b(),x("img",{ref_for:!0,ref:M=>h.value[I]=M,key:p,src:p,style:pe(o(q)),class:V(o(u).e("img")),onLoad:ce,onError:ee,onMousedown:te},null,46,$t)),[[Ne,I===f.value]])),128))],2),U(c.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var Nt=ze(Ot,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const Tt=Ae(Nt),zt=Ie({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:fe([String,Object])},previewSrcList:{type:fe(Array),default:()=>Ee([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),At={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>ge(e),close:()=>!0,show:()=>!0},Bt=["src","loading"],Mt={key:0},Rt={name:"ElImage",inheritAttrs:!1},Pt=$e({...Rt,props:zt,emits:At,setup(e,{emit:t}){const a=e;let l="";const{t:n}=Pe(),d=oe("image"),u=at(),g=vt(),k=L(),h=L(!1),y=L(!0),_=L(!1),f=L(),i=L(),r=j&&"loading"in HTMLImageElement.prototype;let m,C;const S=T(()=>u.style),B=T(()=>{const{fit:s}=a;return j&&s?{objectFit:s}:{}}),q=T(()=>{const{previewSrcList:s}=a;return Array.isArray(s)&&s.length>0}),ie=T(()=>{const{previewSrcList:s,initialIndex:p}=a;let I=p;return p>s.length-1&&(I=0),I}),Y=T(()=>a.loading==="eager"?!1:!r&&a.loading==="lazy"||a.lazy),J=()=>{!j||(y.value=!0,h.value=!1,k.value=a.src)};function ue(s){y.value=!1,h.value=!1,t("load",s)}function ce(s){y.value=!1,h.value=!0,t("error",s)}function ee(){bt(f.value,i.value)&&(J(),W())}const te=st(ee,200);async function Z(){var s;if(!j)return;await re();const{scrollContainer:p}=a;nt(p)?i.value=p:ye(p)&&p!==""?i.value=(s=document.querySelector(p))!=null?s:void 0:f.value&&(i.value=gt(f.value)),i.value&&(m=X(i,"scroll",te),setTimeout(()=>ee(),100))}function W(){!j||!i.value||!te||(m?.(),i.value=void 0)}function ae(s){if(!!s.ctrlKey){if(s.deltaY<0)return s.preventDefault(),!1;if(s.deltaY>0)return s.preventDefault(),!1}}function le(){!q.value||(C=X("wheel",ae,{passive:!1}),l=document.body.style.overflow,document.body.style.overflow="hidden",_.value=!0,t("show"))}function A(){C?.(),document.body.style.overflow=l,_.value=!1,t("close")}function c(s){t("switch",s)}return F(()=>a.src,()=>{Y.value?(y.value=!0,h.value=!1,W(),Z()):J()}),Oe(()=>{Y.value?Z():J()}),(s,p)=>(b(),x("div",{ref_key:"container",ref:f,class:V([o(d).b(),s.$attrs.class]),style:pe(o(S))},[k.value!==void 0&&!h.value?(b(),x("img",lt({key:0},o(g),{src:k.value,loading:s.loading,style:o(B),class:[o(d).e("inner"),o(q)&&o(d).e("preview"),y.value&&o(d).is("loading")],onClick:le,onLoad:ue,onError:ce}),null,16,Bt)):$("v-if",!0),y.value||h.value?(b(),x("div",{key:1,class:V(o(d).e("wrapper"))},[y.value?U(s.$slots,"placeholder",{key:0},()=>[E("div",{class:V(o(d).e("placeholder"))},null,2)]):h.value?U(s.$slots,"error",{key:1},()=>[E("div",{class:V(o(d).e("error"))},he(o(n)("el.image.error")),3)]):$("v-if",!0)],2)):$("v-if",!0),o(q)?(b(),x(z,{key:2},[_.value?(b(),O(o(Tt),{key:0,"z-index":s.zIndex,"initial-index":o(ie),infinite:s.infinite,"url-list":s.previewSrcList,"hide-on-click-modal":s.hideOnClickModal,teleported:s.previewTeleported,"close-on-press-escape":s.closeOnPressEscape,onClose:A,onSwitch:c},{default:w(()=>[s.$slots.viewer?(b(),x("div",Mt,[U(s.$slots,"viewer")])):$("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):$("v-if",!0)],64)):$("v-if",!0)],6))}});var jt=ze(Pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const Ft=Ae(jt);function Yt(e){let t;const a=oe("loading"),l=L(!1),n=Q({...e,originalPosition:"",originalOverflow:"",visible:!1});function d(i){n.text=i}function u(){const i=n.parent;if(!i.vLoadingAddClassList){let r=i.getAttribute("loading-number");r=Number.parseInt(r)-1,r?i.setAttribute("loading-number",r.toString()):(se(i,a.bm("parent","relative")),i.removeAttribute("loading-number")),se(i,a.bm("parent","hidden"))}g(),_.unmount()}function g(){var i,r;(r=(i=f.$el)==null?void 0:i.parentNode)==null||r.removeChild(f.$el)}function k(){var i;if(e.beforeClose&&!e.beforeClose())return;const r=n.parent;r.vLoadingAddClassList=void 0,l.value=!0,clearTimeout(t),t=window.setTimeout(()=>{l.value&&(l.value=!1,u())},400),n.visible=!1,(i=e.closed)==null||i.call(e)}function h(){!l.value||(l.value=!1,u())}const _=ot({name:"ElLoading",setup(){return()=>{const i=n.spinner||n.svg,r=G("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"25 25 50 50",...i?{innerHTML:i}:{}},[G("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),m=n.text?G("p",{class:a.b("text")},[n.text]):void 0;return G(Te,{name:a.b("fade"),onAfterLeave:h},{default:w(()=>[be(v("div",{style:{backgroundColor:n.background||""},class:[a.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[G("div",{class:a.b("spinner")},[r,m])]),[[Ne,n.visible]])])})}}}),f=_.mount(document.createElement("div"));return{...rt(n),setText:d,removeElLoadingChild:g,close:k,handleAfterLeave:h,vm:f,get $el(){return f.$el}}}let ne;const Dt=function(e={}){if(!j)return;const t=Ht(e);if(t.fullscreen&&ne)return ne;const a=Yt({...t,closed:()=>{var n;(n=t.closed)==null||n.call(t),t.fullscreen&&(ne=void 0)}});Xt(t,t.parent,a),Le(t,t.parent,a),t.parent.vLoadingAddClassList=()=>Le(t,t.parent,a);let l=t.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",t.parent.setAttribute("loading-number",l),t.parent.appendChild(a.$el),re(()=>a.visible.value=t.visible),t.fullscreen&&(ne=a),a},Ht=e=>{var t,a,l,n;let d;return ye(e.target)?d=(t=document.querySelector(e.target))!=null?t:document.body:d=e.target||document.body,{parent:d===document.body||e.body?document.body:d,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:d===document.body&&((a=e.fullscreen)!=null?a:!0),lock:(l=e.lock)!=null?l:!1,customClass:e.customClass||"",visible:(n=e.visible)!=null?n:!0,target:d}},Xt=async(e,t,a)=>{const{nextZIndex:l}=Se(),n={};if(e.fullscreen)a.originalPosition.value=K(document.body,"position"),a.originalOverflow.value=K(document.body,"overflow"),n.zIndex=l();else if(e.parent===document.body){a.originalPosition.value=K(document.body,"position"),await re();for(const d of["top","left"]){const u=d==="top"?"scrollTop":"scrollLeft";n[d]=`${e.target.getBoundingClientRect()[d]+document.body[u]+document.documentElement[u]-Number.parseInt(K(document.body,`margin-${d}`),10)}px`}for(const d of["height","width"])n[d]=`${e.target.getBoundingClientRect()[d]}px`}else a.originalPosition.value=K(t,"position");for(const[d,u]of Object.entries(n))a.$el.style[d]=u},Le=(e,t,a)=>{const l=oe("loading");a.originalPosition.value!=="absolute"&&a.originalPosition.value!=="fixed"?ke(t,l.bm("parent","relative")):se(t,l.bm("parent","relative")),e.fullscreen&&e.lock?ke(t,l.bm("parent","hidden")):se(t,l.bm("parent","hidden"))},ve=Symbol("ElLoading"),Ve=(e,t)=>{var a,l,n,d;const u=t.instance,g=f=>Be(t.value)?t.value[f]:void 0,k=f=>{const i=ye(f)&&u?.[f]||f;return i&&L(i)},h=f=>k(g(f)||e.getAttribute(`element-loading-${ut(f)}`)),y=(a=g("fullscreen"))!=null?a:t.modifiers.fullscreen,_={text:h("text"),svg:h("svg"),svgViewBox:h("svgViewBox"),spinner:h("spinner"),background:h("background"),customClass:h("customClass"),fullscreen:y,target:(l=g("target"))!=null?l:y?void 0:e,body:(n=g("body"))!=null?n:t.modifiers.body,lock:(d=g("lock"))!=null?d:t.modifiers.lock};e[ve]={options:_,instance:Dt(_)}},Ut=(e,t)=>{for(const a of Object.keys(t))it(t[a])&&(t[a].value=e[a])},qt={mounted(e,t){t.value&&Ve(e,t)},updated(e,t){const a=e[ve];t.oldValue!==t.value&&(t.value&&!t.oldValue?Ve(e,t):t.value&&t.oldValue?Be(t.value)&&Ut(t.value,a.options):a?.instance.close())},unmounted(e){var t;(t=e[ve])==null||t.instance.close()}};const Jt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Zt=E("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),Wt=[Zt];function Gt(e,t){return b(),x("svg",Jt,Wt)}const Kt={name:"ep-minus",render:Gt},Qt={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ea=E("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),ta=[ea];function aa(e,t){return b(),x("svg",Qt,ta)}const la={name:"ep-plus",render:aa};const na={__name:"app-form-input",props:{prop:{type:String,default:null},model:{type:Object,default:null},schema:{type:Object,default:null},disabled:{type:Boolean,default:!1}},emits:["update:model"],setup(e,{emit:t}){const a=e,l=Q(a.model),n=a.schema.input??a.schema.type;return F(l,d=>{t("update:model",d)}),(d,u)=>{const g=Ft,k=ht,h=yt;return o(n)==="image"?(b(),x(z,{key:0},[e.disabled?(b(),O(g,{key:0,src:l[e.prop],style:{height:"20px"},"preview-src-list":[l[e.prop]],"preview-teleported":""},null,8,["src","preview-src-list"])):(b(),O(k,{key:1,modelValue:l[e.prop],"onUpdate:modelValue":u[0]||(u[0]=y=>l[e.prop]=y)},null,8,["modelValue"]))],64)):o(n)==="boolean"?(b(),O(h,{key:1,modelValue:l[e.prop],"onUpdate:modelValue":u[1]||(u[1]=y=>l[e.prop]=y),disabled:e.disabled},null,8,["modelValue","disabled"])):(b(),x(z,{key:2},[e.disabled?(b(),x(z,{key:0},[_e(he(l[e.prop]),1)],64)):(b(),O(k,{key:1,modelValue:l[e.prop],"onUpdate:modelValue":u[2]||(u[2]=y=>l[e.prop]=y)},ct({_:2},[e.schema.prefix?{name:"prefix",fn:w(()=>[v(Ce,{class:"el-input__icon",name:e.schema.prefix},null,8,["name"])]),key:"0"}:void 0,e.schema.suffix?{name:"suffix",fn:w(()=>[v(Ce,{class:"el-input__icon",name:e.schema.suffix},null,8,["name"])]),key:"1"}:void 0]),1032,["modelValue"]))],64))}}},sa={__name:"app-form-item",props:{modelValue:{type:Object,default:null},schema:{type:Object,default:null},prefix:{type:String,default:null},validate:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","update:schema"],setup(e,{emit:t}){const a=e,l=Q(a.modelValue),n=Q(a.schema);F(l,g=>{t("update:modelValue",g)}),F(n,g=>{t("update:schema",g)});const d=(g,k)=>{g.length?g.push(JSON.parse(JSON.stringify(g[g.length-1]))):g.push(Me(k))},u=(g,k)=>{g.splice(k,1)};return(g,k)=>{const h=dt("app-form-item",!0),y=Re,_=la,f=P,i=Kt;return b(!0),x(z,null,me(n.properties,(r,m)=>(b(),x(z,{key:m},[r.skip?$("",!0):(b(),x(z,{key:0},[r.type==="object"?(b(),O(y,{key:0,label:r.title,rules:r.rules},{default:w(()=>[v(h,{modelValue:l[m],"onUpdate:modelValue":C=>l[m]=C,schema:n.properties[m],prefix:m,validate:e.validate,disabled:e.disabled},null,8,["modelValue","onUpdate:modelValue","schema","prefix","validate","disabled"])]),_:2},1032,["label","rules"])):r.type==="array"&&r.items.type==="object"?(b(),x(z,{key:1},[v(y,{label:r.title,rules:r.rules},{default:w(()=>[l[m].length?$("",!0):(b(),O(f,{key:0,class:"cursor-pointer mx-2",onClick:C=>d(l[m],r.items.properties)},{default:w(()=>[v(_)]),_:2},1032,["onClick"]))]),_:2},1032,["label","rules"]),(b(!0),x(z,null,me(l[m],(C,S)=>(b(),O(y,{key:C},{default:w(()=>[v(h,{modelValue:l[m][S],"onUpdate:modelValue":B=>l[m][S]=B,schema:n.properties[m].items,prefix:m+"["+S+"]",validate:e.validate},null,8,["modelValue","onUpdate:modelValue","schema","prefix","validate"]),v(f,{class:"cursor-pointer mx-2",onClick:B=>d(l[m],r.items.properties)},{default:w(()=>[v(_)]),_:2},1032,["onClick"]),v(f,{class:"cursor-pointer mx-2",onClick:B=>u(l[m],S)},{default:w(()=>[v(i)]),_:2},1032,["onClick"])]),_:2},1024))),128))],64)):(b(),O(y,{key:2,prop:e.prefix?e.prefix+"."+m:m,label:r.title,rules:e.validate?r.rules:null,title:m},{default:w(()=>[v(na,{prop:m,model:l,schema:r,disabled:e.disabled||r.disabled},null,8,["prop","model","schema","disabled"])]),_:2},1032,["prop","label","rules","title"]))],64))],64))),128)}}},oa={key:0,class:"text-center"},ra=_e(" \u63D0\u4EA4 "),ia=_e("\u91CD\u7F6E"),pa={__name:"app-form",props:{modelValue:{type:Object,default:null}},emits:["update:modelValue","before","after"],setup(e,{expose:t,emit:a}){const l=e,n=Q(l.modelValue);F(n,_=>{a("update:modelValue",_)}),n.data||(n.data=Me(n.schema.properties),xe.debug("\u6839\u636E schema \u751F\u6210 model\uFF1A"),xe.debug(JSON.stringify(n.data,null,2)));const d=L(null),u=L(!1),g=L(!1),k=()=>{d.value.resetFields()},h=async()=>d.value.validate(),y=async()=>{try{if(await h()){g.value=!0,u.value=!0;const f=l.modelValue.action,i=l.modelValue.method??"post",r={url:f,method:i},m=Ct(n.data);a("before",B=>{Object.assign(m,B)}),i==="get"?r.params=m:i==="post"&&(r.data=m);const C=await ft.request(r),S=C.data?.data??C.data;a("after",S)}}catch(_){console.error("error",_)}finally{g.value=!1,u.value=!1}};return t({reset:k,validate:h,submit:y}),(_,f)=>{const i=wt,r=Re,m=_t,C=qt;return be((b(),O(m,{ref_key:"formRef",ref:d,"element-loading-background":"rgba(0, 0, 0, 0)",inline:n.inline,model:n.data,"label-width":"auto","label-suffix":n.labelSufix},{default:w(()=>[U(_.$slots,"header",{},()=>[n.schema.title?(b(),x("h2",oa,he(n.schema.title),1)):$("",!0)]),v(sa,{modelValue:n.data,"onUpdate:modelValue":f[0]||(f[0]=S=>n.data=S),schema:n.schema,disabled:n.disabled,validate:!n.disableValidation},null,8,["modelValue","schema","disabled","validate"]),U(_.$slots,"footer",{},()=>[v(r,null,{default:w(()=>[v(i,{disabled:g.value,type:"primary",onClick:y},{default:w(()=>[ra]),_:1},8,["disabled"]),v(i,{onClick:k},{default:w(()=>[ia]),_:1})]),_:1})])]),_:3},8,["inline","model","label-suffix"])),[[C,u.value]])}}};export{pa as _,na as a};
