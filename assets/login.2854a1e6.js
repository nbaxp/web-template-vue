import{S as h,i as w,ac as y,l as k,I as c,d as e,w as t,A as b,o as x,a7 as u,ae as V,al as v,g as E}from"./index.37b1d6e0.js";import{b as R}from"./el-form-item.216aa1ef.js";import{E as q}from"./el-button.261a4476.js";import{E as B}from"./el-checkbox.f87ca31c.js";import{_ as C,r as N}from"./app-form.341c51f8.js";import U from"./header-logo.a9afe838.js";import"./index.3fc73dc3.js";import"./plugin-vue_export-helper.a0554eae.js";import"./index.81af5d9c.js";import"./icon.ee5d210f.js";import"./index.d745f932.js";/* empty css                */import"./svg-icon.55bb9076.js";import"./el-space.0ed54b9a.js";const I={class:"center"},M={style:{width:"320px"}},S={class:"between w-full"},$=u("\u5FD8\u8BB0\u5BC6\u7801"),A=u("\u767B\u5F55"),T=u("\u6CE8\u518C\u8D26\u53F7"),Z={__name:"login",setup(j){const r=h({action:"user/login",data:null,schema:{title:"\u767B\u5F55",type:"object",properties:{userName:{type:"string",default:null,placeholder:"\u7528\u6237\u540D",prefix:"user",rules:[{required:!0,trigger:"change"}]},password:{type:"string",default:null,placeholder:"\u5BC6\u7801",prefix:"lock",inputType:"password",showPassword:!0,rules:[{required:!0,trigger:"change"}]},rememberMe:{skip:!0,default:!1}}}}),m=w(null),f=V(),_=v(),d=y(),g=async n=>{console.log(n);const{token:o}=n;await d.login(o);const s=await N.post("user/info"),a=s.data?.code?s.data.data:s.data;d.setUserInfo(a),f.push({path:_.query.redirect??"/"})};return(n,o)=>{const s=B,a=q,p=E("router-link"),i=R;return x(),k("div",I,[c("div",M,[e(C,{ref_key:"formRef",ref:m,modelValue:r,"onUpdate:modelValue":o[2]||(o[2]=l=>b(r)?r.value=l:null),class:"text-center",onAfter:g},{header:t(()=>[e(U,{class:"m-4"})]),footer:t(()=>[e(i,null,{default:t(()=>[c("div",S,[e(s,{modelValue:r.data.rememberMe,"onUpdate:modelValue":o[0]||(o[0]=l=>r.data.rememberMe=l),label:"\u8BB0\u4F4F\u5BC6\u7801",size:"large"},null,8,["modelValue"]),e(p,{to:"/forgot-password"},{default:t(()=>[e(a,{type:"primary",link:""},{default:t(()=>[$]),_:1})]),_:1})])]),_:1}),e(i,null,{default:t(()=>[e(a,{type:"primary",class:"w-full",onClick:o[1]||(o[1]=l=>m.value.submit())},{default:t(()=>[A]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(p,{to:"/register",class:"w-full text-center"},{default:t(()=>[e(a,{type:"primary",link:""},{default:t(()=>[T]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])}}};export{Z as default};
